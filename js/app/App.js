define(["app/Events","app/List","app/Loader","app/Places","app/Settings","app/Store"],function(t,e,n,i,s,r){function o(o,a,p,h,g){this.startingArea=o.startingArea,this.totalElement=h,this.events=new t,this.store=new r(this,g,o.storageKey),this.settings=new s(this),this.loader=new n(this),this.places=new i(this,a,o.layout),this.list=new e(this,p),this.updateTotalCount(),this.loadStartingArea()}return o.prototype.reset=function(){this.getStore().reset(),this.getEvents().trigger("Reset"),this.loadStartingArea()},o.prototype.getEvents=function(){return this.events},o.prototype.getList=function(){return this.list},o.prototype.getLoader=function(){return this.loader},o.prototype.getPlaces=function(){return this.places},o.prototype.getSettings=function(){return this.settings},o.prototype.getStore=function(){return this.store},o.prototype.updateTotalCount=function(){var t=0,e=0;this.loader.getAllAreas().forEach(function(n){t+=n.total-n.count,e+=n.total}),this.totalElement.innerText=t+" / "+e},o.prototype.loadStartingArea=function(){this.getList().changeArea(this.getLoader().getAreaByName(this.startingArea))},o});