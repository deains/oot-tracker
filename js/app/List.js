define([],function(){function e(e,t){this.app=e,this.element=t,this.init()}return e.prototype.changeArea=function(e){this.currentArea&&this.currentArea.removeState("active"),this.currentArea=e,e.addState("active"),this.loadArea(e)},e.prototype.getCurrentArea=function(){return this.currentArea||null},e.prototype.getElement=function(){return this.element},e.prototype.reload=function(){this.getCurrentArea()&&this.loadArea(this.getCurrentArea())},e.prototype.init=function(){this.getElement().querySelectorAll(".action-key").forEach(function(e){e.addEventListener("click",function(t){0===t.button&&(this.getCurrentArea()&&("small"===e.dataset.key?(this.getCurrentArea().incrementSmallKeyCount(),this.setSmallKeyCount(this.getCurrentArea().getSmallKeyCount())):(this.getCurrentArea().incrementBigKeyCount(),this.setBigKeyCount(this.getCurrentArea().getBigKeyCount()))),t.preventDefault())}.bind(this)),e.addEventListener("contextmenu",function(t){this.getCurrentArea()&&("small"===e.dataset.key?(this.getCurrentArea().decrementSmallKeyCount(),this.setSmallKeyCount(this.getCurrentArea().getSmallKeyCount())):(this.getCurrentArea().decrementBigKeyCount(),this.setBigKeyCount(this.getCurrentArea().getBigKeyCount()))),t.preventDefault()}.bind(this))},this),this.app.getEvents().add("Reload",function(){this.reload()}.bind(this))},e.prototype.loadArea=function(e){this.element.querySelector(".header .title").innerHTML=e.getName(),this.element.className="list "+e.getClass(),e.hasKeys()?(this.element.querySelector(".header .keys").classList.remove("hidden"),this.setSmallKeyCount(e.getSmallKeyCount()),this.setKeyTotal(e.getSmallKeyTotal(),"small"),this.setBigKeyCount(e.getBigKeyCount()),this.setKeyTotal(e.getBigKeyTotal(),"big"),this.element.querySelector(".keys .small").classList[0===e.getSmallKeyTotal()?"add":"remove"]("hidden"),this.element.querySelector(".keys .big").classList[0===e.getBigKeyTotal()?"add":"remove"]("hidden")):this.element.querySelector(".header .keys").classList.add("hidden"),this.loadChecks(e.getChecks())},e.prototype.loadChecks=function(e){for(var t=this.element.querySelector(".checks");t.hasChildNodes();)t.removeChild(t.lastChild);e.forEach(function(e){e.meetsRequirements(this.app.getSettings())&&t.appendChild(e.getElement())},this)},e.prototype.setSmallKeyCount=function(e){var t=this.element.querySelector(".small");t.querySelector(".got").innerHTML=e.toString(),e<this.getCurrentArea().getSmallKeyTotal()?t.classList.remove("complete"):t.classList.add("complete")},e.prototype.setBigKeyCount=function(e){var t=this.element.querySelector(".big");t.querySelector(".got").innerHTML=e.toString(),e<this.getCurrentArea().getBigKeyTotal()?t.classList.remove("complete"):t.classList.add("complete")},e.prototype.setKeyTotal=function(e,t){this.element.querySelector("."+t+" .total").innerHTML=e.toString()},e});