define(["app/App","json!data/app.json"],function(e,t){var n=new e(t,document.getElementById("places"),document.getElementById("list"),window.localStorage);document.getElementById("reset").addEventListener("click",function(){n.reset()}),n.getEvents().add("StyleChange",function(){n.getSettings().get("darkmode")?document.body.classList.add("dark"):document.body.classList.remove("dark")}),n.getEvents().trigger("StyleChange"),["settings","mq","about"].forEach(function(e){var t=document.getElementById(e),n=document.getElementById("open-"+e);document.addEventListener("click",function(e){e.target instanceof Node&&!t.contains(e.target)&&t!==e.target&&!n.contains(e.target)&&n!==e.target&&(t.style.opacity="",setTimeout(function(){t.classList.remove("open")},200))}),n.addEventListener("click",function(){t.classList.contains("open")?(t.style.opacity="",setTimeout(function(){t.classList.remove("open")},200)):(t.classList.add("open"),setTimeout(function(){t.style.opacity="1"},4))})}),function(){var e=document.getElementById("settings").querySelector("ul"),t=document.getElementById("mq").querySelector("ul"),o=document.getElementById("settings").querySelector(".template");o.classList.remove("template"),o.remove(),n.getSettings().all().forEach(function(a){if(a.showInMenu){var c="settings"===a.showInMenu?e:t,s=o.cloneNode(!0);s.querySelector(".title").innerHTML=a.title,s.querySelectorAll("input").forEach(function(e){e.name=a.name,a.value===("true"===e.value)&&(e.checked=!0),e.addEventListener("change",function(){n.getSettings().set(a.name,"true"===this.value)})}),c.appendChild(s)}})}(),document.querySelectorAll("#about .shields").forEach(function(e){for(var n in t.shields)if(t.shields.hasOwnProperty(n)){var o=document.createElement("a");o.href=t.shields[n].url.replace(/REPO/,t.repo),o.target="_blank";var a=document.createElement("img");t.shields[n].enc?a.src=t.shields[n].img.replace(/REPO/,encodeURI(t.repo.replace("-","--"))):a.src=t.shields[n].img.replace(/REPO/,t.repo),o.appendChild(a),e.appendChild(o)}}),function(){var e=document.getElementById("loading-msg");e.style.opacity="0",setTimeout(function(){e.remove()},500),document.getElementById("container").classList.remove("loading")}(),window.app=n,window.debugState=function(){console.debug(n.getStore().getSave())}});